<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WEBSET KLONER - Auto Detect & Replace</title>
    <style>
        :root {
            --primary: #4a6fa5;
            --secondary: #6b8cbc;
            --light: #f5f7fa;
            --dark: #333;
            --success: #28a745;
            --danger: #dc3545;
            --warning: #ffc107;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--light);
            color: var(--dark);
            line-height: 1.6;
            padding: 10px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            padding: 25px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }
        
        h1 {
            font-size: 2rem;
            margin-bottom: 10px;
        }
        
        .description {
            font-size: 0.95rem;
            opacity: 0.95;
            max-width: 700px;
            margin: 0 auto;
        }
        
        .input-section {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 3px 6px rgba(0,0,0,0.08);
            margin-bottom: 20px;
        }
        
        .input-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        input[type="url"], input[type="text"] {
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            font-size: 1rem;
            flex: 1;
            min-width: 250px;
            transition: border 0.3s;
        }
        
        input:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        button {
            padding: 12px 24px;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        button:hover {
            background-color: var(--secondary);
            transform: translateY(-2px);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        .btn-success {
            background-color: var(--success);
        }
        
        .btn-success:hover {
            background-color: #218838;
        }
        
        .btn-danger {
            background-color: var(--danger);
        }
        
        .btn-danger:hover {
            background-color: #c82333;
        }
        
        .btn-warning {
            background-color: var(--warning);
            color: #333;
        }
        
        .btn-warning:hover {
            background-color: #e0a800;
        }
        
        .content-area {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
        }
        
        @media (min-width: 1024px) {
            .content-area {
                grid-template-columns: 350px 1fr;
            }
        }
        
        .replacer-section, .preview-section {
            background: white;
            border-radius: 12px;
            box-shadow: 0 3px 6px rgba(0,0,0,0.08);
            overflow: hidden;
        }
        
        .section-header {
            padding: 15px 20px;
            background-color: var(--primary);
            color: white;
            font-weight: 600;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .section-body {
            padding: 20px;
        }
        
        .replacer-body {
            max-height: 600px;
            overflow-y: auto;
        }
        
        .preview-body {
            height: 600px;
            padding: 0;
        }
        
        #previewFrame {
            width: 100%;
            height: 100%;
            border: none;
            background-color: white;
        }
        
        .replace-group {
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 2px solid #f0f0f0;
        }
        
        .replace-group:last-child {
            border-bottom: none;
        }
        
        .replace-label {
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .badge {
            background-color: var(--secondary);
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
        }
        
        .replace-item {
            background: #f8f9fa;
            padding: 12px;
            border-radius: 6px;
            margin-bottom: 8px;
            border-left: 3px solid var(--primary);
        }
        
        .replace-item label {
            display: block;
            font-size: 0.85rem;
            color: #666;
            margin-bottom: 5px;
        }
        
        .replace-item input {
            width: 100%;
            padding: 8px 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 0.9rem;
        }
        
        .replace-item small {
            display: block;
            color: #999;
            font-size: 0.8rem;
            margin-top: 4px;
            word-break: break-all;
        }
        
        .actions {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .alert {
            padding: 15px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
            animation: slideIn 0.3s;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .alert-success {
            background-color: #d4edda;
            color: #155724;
            border-left: 4px solid #28a745;
        }
        
        .alert-danger {
            background-color: #f8d7da;
            color: #721c24;
            border-left: 4px solid #dc3545;
        }
        
        .loading {
            display: none;
            text-align: center;
            padding: 30px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 3px 6px rgba(0,0,0,0.08);
        }
        
        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: var(--primary);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .stats {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-top: 15px;
        }
        
        .stat-item {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 0.9rem;
        }
        
        .stat-item strong {
            display: block;
            font-size: 1.5rem;
        }
        
        footer {
            text-align: center;
            margin-top: 30px;
            padding: 20px;
            color: #666;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üöÄ Websset kloner v1</h1>
            <p class="description">KLONING website, auto-detect elemen (title, links, images, text, description)</p>
        </header>
        
        <div class="alert alert-success" id="successAlert"></div>
        <div class="alert alert-danger" id="errorAlert"></div>
        
        <div class="input-section">
            <div class="input-group">
                <input type="url" id="urlInput" placeholder="Masukkin URL website (contoh: https://example.com)" required>
                <button id="cloneBtn">üîç Clone & Analyze</button>
            </div>
            <div class="stats" id="statsContainer" style="display: none;"></div>
        </div>
        
        <div class="loading" id="loadingIndicator">
            <div class="spinner"></div>
            <p><strong>Sedang meng-iclik & menganalisis website...</strong></p>
            <p style="color: #666; font-size: 0.9rem;">Mendeteksi title, links, images, dan elemen lainnya</p>
        </div>
        
        <div class="content-area" id="contentArea" style="display: none;">
            <div class="replacer-section">
                <div class="section-header">
                    <span>üéØ Quick Replace</span>
                </div>
                <div class="section-body replacer-body" id="replacerBody">
                    <!-- Akan diisi otomatis oleh JavaScript -->
                </div>
            </div>
            
            <div class="preview-section">
                <div class="section-header">
                    <span>üëÅÔ∏è Live Preview</span>
                    <button id="refreshPreview">üîÑ Refresh</button>
                </div>
                <div class="section-body preview-body">
                    <iframe id="previewFrame"></iframe>
                </div>
            </div>
        </div>
        
        <div class="actions" id="actionButtons" style="display: none;">
            <button id="applyChanges" class="btn-success">‚úÖ Apply All Changes</button>
            <button id="saveBtn" class="btn-success">üíæ Download HTML</button>
            <button id="viewCodeBtn" class="btn-warning">üìù View Full Code</button>
            <button id="resetBtn" class="btn-danger">üîÑ Reset</button>
        </div>
        
        <footer>
            <p><strong>Webset KLONER</strong> &copy; 2025 - Clone, Edit, sLeep with Ease!</p>
        </footer>
    </div>

    <script>
        let originalHTML = '';
        let currentHTML = '';
        let detectedElements = {
            title: '',
            metaDescription: '',
            links: [],
            images: [],
            headings: [],
            paragraphs: [],
            descriptions: []
        };

        document.addEventListener('DOMContentLoaded', function() {
            const urlInput = document.getElementById('urlInput');
            const cloneBtn = document.getElementById('cloneBtn');
            const previewFrame = document.getElementById('previewFrame');
            const refreshPreviewBtn = document.getElementById('refreshPreview');
            const applyChangesBtn = document.getElementById('applyChanges');
            const saveBtn = document.getElementById('saveBtn');
            const viewCodeBtn = document.getElementById('viewCodeBtn');
            const resetBtn = document.getElementById('resetBtn');
            const contentArea = document.getElementById('contentArea');
            const actionButtons = document.getElementById('actionButtons');
            const loadingIndicator = document.getElementById('loadingIndicator');
            const successAlert = document.getElementById('successAlert');
            const errorAlert = document.getElementById('errorAlert');
            const replacerBody = document.getElementById('replacerBody');
            const statsContainer = document.getElementById('statsContainer');
            
            cloneBtn.addEventListener('click', cloneWebsite);
            refreshPreviewBtn.addEventListener('click', refreshPreview);
            applyChangesBtn.addEventListener('click', applyChanges);
            saveBtn.addEventListener('click', saveAsFile);
            viewCodeBtn.addEventListener('click', viewFullCode);
            resetBtn.addEventListener('click', resetApp);
            
            async function cloneWebsite() {
                const url = urlInput.value.trim();
                
                if (!url) {
                    showAlert(errorAlert, '‚ùå Masukkan URL yang valid!');
                    return;
                }
                
                loadingIndicator.style.display = 'block';
                contentArea.style.display = 'none';
                actionButtons.style.display = 'none';
                statsContainer.style.display = 'none';
                hideAlerts();
                
                try {
                    const proxyUrl = 'https://api.allorigins.win/raw?url=';
                    const response = await fetch(proxyUrl + encodeURIComponent(url));
                    
                    if (!response.ok) {
                        throw new Error('Gagal mengambil website');
                    }
                    
                    originalHTML = await response.text();
                    currentHTML = originalHTML;
                    
                    // Parse dan deteksi elemen
                    detectElements(originalHTML, url);
                    
                    // Tampilkan replacer UI
                    buildReplacerUI();
                    
                    // Tampilkan preview
                    refreshPreview();
                    
                    // Tampilkan stats
                    displayStats();
                    
                    contentArea.style.display = 'grid';
                    actionButtons.style.display = 'flex';
                    statsContainer.style.display = 'flex';
                    
                    showAlert(successAlert, '‚úÖ Website berhasil di-clone! ' + Object.keys(detectedElements.links).length + ' links, ' + detectedElements.images.length + ' images terdeteksi.');
                    
                } catch (error) {
                    console.error('Error:', error);
                    showAlert(errorAlert, '‚ùå Gagal clone website. Coba URL lain atau cek koneksi internet.');
                } finally {
                    loadingIndicator.style.display = 'none';
                }
            }
            
            function detectElements(html, baseUrl) {
                const parser = new DOMParser();
                const doc = parser.parseFromString(html, 'text/html');
                
                // Detect Title
                detectedElements.title = doc.querySelector('title')?.textContent || '';
                
                // Detect Meta Description
                detectedElements.metaDescription = doc.querySelector('meta[name="description"]')?.getAttribute('content') || '';
                
                // Detect Links
                detectedElements.links = [];
                doc.querySelectorAll('a[href]').forEach((link, index) => {
                    const href = link.getAttribute('href');
                    const text = link.textContent.trim();
                    if (href && href !== '#' && href !== 'javascript:void(0)') {
                        detectedElements.links.push({
                            index: index,
                            originalHref: href,
                            newHref: href,
                            text: text || href
                        });
                    }
                });
                
                // Detect Images
                detectedElements.images = [];
                doc.querySelectorAll('img[src]').forEach((img, index) => {
                    const src = img.getAttribute('src');
                    const alt = img.getAttribute('alt') || '';
                    if (src) {
                        detectedElements.images.push({
                            index: index,
                            originalSrc: src,
                            newSrc: src,
                            alt: alt
                        });
                    }
                });
                
                // Detect Main Headings
                detectedElements.headings = [];
                doc.querySelectorAll('h1, h2, h3').forEach((heading, index) => {
                    const text = heading.textContent.trim();
                    if (text) {
                        detectedElements.headings.push({
                            index: index,
                            tag: heading.tagName.toLowerCase(),
                            originalText: text,
                            newText: text
                        });
                    }
                });
                
                // Detect Paragraphs & Descriptions
                detectedElements.paragraphs = [];
                doc.querySelectorAll('p').forEach((p, index) => {
                    const text = p.textContent.trim();
                    if (text && text.length > 20) { // Only substantial paragraphs
                        detectedElements.paragraphs.push({
                            index: index,
                            originalText: text,
                            newText: text
                        });
                    }
                });
                
                // Detect other description elements
                detectedElements.descriptions = [];
                doc.querySelectorAll('[class*="description"], [class*="desc"], [id*="description"], [id*="desc"]').forEach((el, index) => {
                    const text = el.textContent.trim();
                    if (text && text.length > 15) {
                        detectedElements.descriptions.push({
                            index: index,
                            originalText: text,
                            newText: text,
                            element: el.tagName.toLowerCase()
                        });
                    }
                });
            }
            
            function buildReplacerUI() {
                let html = '';
                
                // Title Section
                html += `
                    <div class="replace-group">
                        <div class="replace-label">üìÑ Title</div>
                        <div class="replace-item">
                            <label>Website Title</label>
                            <input type="text" id="replace-title" value="${escapeHtml(detectedElements.title)}" placeholder="Ganti title website">
                        </div>
                    </div>
                `;
                
                // Meta Description
                if (detectedElements.metaDescription) {
                    html += `
                        <div class="replace-group">
                            <div class="replace-label">üìù Meta Description</div>
                            <div class="replace-item">
                                <label>Description</label>
                                <input type="text" id="replace-meta-desc" value="${escapeHtml(detectedElements.metaDescription)}" placeholder="Ganti meta description">
                            </div>
                        </div>
                    `;
                }
                
                // Headings Section
                if (detectedElements.headings.length > 0) {
                    html += `
                        <div class="replace-group">
                            <div class="replace-label">
                                üéØ Headings <span class="badge">${detectedElements.headings.length}</span>
                            </div>
                    `;
                    detectedElements.headings.slice(0, 10).forEach((heading, i) => {
                        html += `
                            <div class="replace-item">
                                <label>${heading.tag.toUpperCase()} #${i + 1}</label>
                                <input type="text" data-heading-index="${i}" value="${escapeHtml(heading.originalText)}" placeholder="Ganti heading text">
                                <small>Original: ${escapeHtml(heading.originalText.substring(0, 50))}${heading.originalText.length > 50 ? '...' : ''}</small>
                            </div>
                        `;
                    });
                    if (detectedElements.headings.length > 10) {
                        html += `<small style="display: block; text-align: center; color: #999; margin-top: 10px;">+ ${detectedElements.headings.length - 10} more headings</small>`;
                    }
                    html += `</div>`;
                }
                
                // Paragraphs Section
                if (detectedElements.paragraphs.length > 0) {
                    html += `
                        <div class="replace-group">
                            <div class="replace-label">
                                üìù Paragraphs/Text <span class="badge">${detectedElements.paragraphs.length}</span>
                            </div>
                    `;
                    detectedElements.paragraphs.slice(0, 8).forEach((para, i) => {
                        html += `
                            <div class="replace-item">
                                <label>Paragraph #${i + 1}</label>
                                <input type="text" data-paragraph-index="${i}" value="${escapeHtml(para.originalText.substring(0, 100))}" placeholder="Ganti text paragraph">
                                <small>Original: ${escapeHtml(para.originalText.substring(0, 60))}${para.originalText.length > 60 ? '...' : ''}</small>
                            </div>
                        `;
                    });
                    if (detectedElements.paragraphs.length > 8) {
                        html += `<small style="display: block; text-align: center; color: #999; margin-top: 10px;">+ ${detectedElements.paragraphs.length - 8} more paragraphs</small>`;
                    }
                    html += `</div>`;
                }
                
                // Descriptions Section
                if (detectedElements.descriptions.length > 0) {
                    html += `
                        <div class="replace-group">
                            <div class="replace-label">
                                üí¨ Descriptions <span class="badge">${detectedElements.descriptions.length}</span>
                            </div>
                    `;
                    detectedElements.descriptions.slice(0, 8).forEach((desc, i) => {
                        html += `
                            <div class="replace-item">
                                <label>Description #${i + 1} (${desc.element})</label>
                                <input type="text" data-description-index="${i}" value="${escapeHtml(desc.originalText.substring(0, 100))}" placeholder="Ganti description text">
                                <small>Original: ${escapeHtml(desc.originalText.substring(0, 60))}${desc.originalText.length > 60 ? '...' : ''}</small>
                            </div>
                        `;
                    });
                    if (detectedElements.descriptions.length > 8) {
                        html += `<small style="display: block; text-align: center; color: #999; margin-top: 10px;">+ ${detectedElements.descriptions.length - 8} more descriptions</small>`;
                    }
                    html += `</div>`;
                }
                
                // Links Section
                if (detectedElements.links.length > 0) {
                    html += `
                        <div class="replace-group">
                            <div class="replace-label">
                                üîó Links <span class="badge">${detectedElements.links.length}</span>
                            </div>
                    `;
                    detectedElements.links.slice(0, 10).forEach((link, i) => {
                        html += `
                            <div class="replace-item">
                                <label>Link #${i + 1}: ${escapeHtml(link.text.substring(0, 30))}${link.text.length > 30 ? '...' : ''}</label>
                                <input type="text" data-link-index="${i}" value="${escapeHtml(link.originalHref)}" placeholder="Ganti URL link">
                                <small>Original: ${escapeHtml(link.originalHref.substring(0, 50))}${link.originalHref.length > 50 ? '...' : ''}</small>
                            </div>
                        `;
                    });
                    if (detectedElements.links.length > 10) {
                        html += `<small style="display: block; text-align: center; color: #999; margin-top: 10px;">+ ${detectedElements.links.length - 10} more links</small>`;
                    }
                    html += `</div>`;
                }
                
                // Images Section
                if (detectedElements.images.length > 0) {
                    html += `
                        <div class="replace-group">
                            <div class="replace-label">
                                üñºÔ∏è Images <span class="badge">${detectedElements.images.length}</span>
                            </div>
                    `;
                    detectedElements.images.slice(0, 10).forEach((img, i) => {
                        html += `
                            <div class="replace-item">
                                <label>Image #${i + 1}${img.alt ? ': ' + escapeHtml(img.alt.substring(0, 30)) : ''}</label>
                                <input type="text" data-image-index="${i}" value="${escapeHtml(img.originalSrc)}" placeholder="Ganti URL gambar">
                                <small>Original: ${escapeHtml(img.originalSrc.substring(0, 50))}${img.originalSrc.length > 50 ? '...' : ''}</small>
                            </div>
                        `;
                    });
                    if (detectedElements.images.length > 10) {
                        html += `<small style="display: block; text-align: center; color: #999; margin-top: 10px;">+ ${detectedElements.images.length - 10} more images</small>`;
                    }
                    html += `</div>`;
                }
                
                replacerBody.innerHTML = html;
            }
            
            function displayStats() {
                statsContainer.innerHTML = `
                    <div class="stat-item">
                        <strong>${detectedElements.links.length}</strong>
                        Links
                    </div>
                    <div class="stat-item">
                        <strong>${detectedElements.images.length}</strong>
                        Images
                    </div>
                    <div class="stat-item">
                        <strong>${detectedElements.headings.length}</strong>
                        Headings
                    </div>
                    <div class="stat-item">
                        <strong>${detectedElements.paragraphs.length}</strong>
                        Paragraphs
                    </div>
                    <div class="stat-item">
                        <strong>${detectedElements.descriptions.length}</strong>
                        Descriptions
                    </div>
                `;
            }
            
            function applyChanges() {
                currentHTML = originalHTML;
                
                // Replace Title
                const newTitle = document.getElementById('replace-title')?.value;
                if (newTitle && detectedElements.title) {
                    currentHTML = currentHTML.replace(
                        `<title>${detectedElements.title}</title>`,
                        `<title>${newTitle}</title>`
                    );
                }
                
                // Replace Meta Description
                const newMetaDesc = document.getElementById('replace-meta-desc')?.value;
                if (newMetaDesc && detectedElements.metaDescription) {
                    currentHTML = currentHTML.replace(
                        `content="${detectedElements.metaDescription}"`,
                        `content="${newMetaDesc}"`
                    );
                }
                
                // Replace Headings
                document.querySelectorAll('[data-heading-index]').forEach(input => {
                    const index = parseInt(input.dataset.headingIndex);
                    const heading = detectedElements.headings[index];
                    const newText = input.value;
                    if (heading && newText !== heading.originalText) {
                        const regex = new RegExp(`<${heading.tag}([^>]*)>${escapeRegex(heading.originalText)}<\/${heading.tag}>`, 'g');
                        currentHTML = currentHTML.replace(regex, `<${heading.tag}$1>${newText}</${heading.tag}>`);
                    }
                });
                
                // Replace Links
                document.querySelectorAll('[data-link-index]').forEach(input => {
                    const index = parseInt(input.dataset.linkIndex);
                    const link = detectedElements.links[index];
                    const newHref = input.value;
                    if (link && newHref !== link.originalHref) {
                        currentHTML = currentHTML.replace(
                            `href="${link.originalHref}"`,
                            `href="${newHref}"`
                        );
                    }
                });
                
                // Replace Images
                document.querySelectorAll('[data-image-index]').forEach(input => {
                    const index = parseInt(input.dataset.imageIndex);
                    const img = detectedElements.images[index];
                    const newSrc = input.value;
                    if (img && newSrc !== img.originalSrc) {
                        currentHTML = currentHTML.replace(
                            `src="${img.originalSrc}"`,
                            `src="${newSrc}"`
                        );
                    }
                });
                
                // Replace Paragraphs
                document.querySelectorAll('[data-paragraph-index]').forEach(input => {
                    const index = parseInt(input.dataset.paragraphIndex);
                    const para = detectedElements.paragraphs[index];
                    const newText = input.value;
                    if (para && newText !== para.originalText) {
                        currentHTML = currentHTML.replace(
                            escapeRegex(para.originalText),
                            newText
                        );
                    }
                });
                
                // Replace Descriptions
                document.querySelectorAll('[data-description-index]').forEach(input => {
                    const index = parseInt(input.dataset.descriptionIndex);
                    const desc = detectedElements.descriptions[index];
                    const newText = input.value;
                    if (desc && newText !== desc.originalText) {
                        currentHTML = currentHTML.replace(
                            escapeRegex(desc.originalText),
                            newText
                        );
                    }
                });
                
                refreshPreview();
                showAlert(successAlert, '‚úÖ Perubahan berhasil diterapkan! Lihat preview untuk hasil.');
            }
            
            function refreshPreview() {
                const blob = new Blob([currentHTML], { type: 'text/html' });
                const url = URL.createObjectURL(blob);
                previewFrame.src = url;
            }
            
            function saveAsFile() {
                const blob = new Blob([currentHTML], { type: 'text/html' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'cloned-website-modified.html';
                document.body.appendChild(a);
                a.click();
                setTimeout(() => {
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                }, 100);
                showAlert(successAlert, 'üíæ File berhasil didownload!');
            }
            
            function viewFullCode() {
                const win = window.open('', '_blank');
                win.document.write(`
                    <html>
                    <head>
                        <title>Full HTML Code</title>
                        <style>
                            body { font-family: monospace; padding: 20px; background: #1e1e1e; color: #d4d4d4; }
                            pre { white-space: pre-wrap; word-wrap: break-word; }
                        </style>
                    </head>
                    <body>
                        <h2 style="color: #4a6fa5;">Full HTML Code</h2>
                        <pre>${escapeHtml(currentHTML)}</pre>
                    </body>
                    </html>
                `);
            }
            
            function resetApp() {
                urlInput.value = '';
                originalHTML = '';
                currentHTML = '';
                previewFrame.src = 'about:blank';
                contentArea.style.display = 'none';
                actionButtons.style.display = 'none';
                statsContainer.style.display = 'none';
                hideAlerts();
                detectedElements = { title: '', metaDescription: '', links: [], images: [], headings: [], paragraphs: [], descriptions: [] };
            }
            
            function showAlert(alertElement, message) {
                alertElement.textContent = message;
                alertElement.style.display = 'block';
                setTimeout(() => {
                    alertElement.style.display = 'none';
                }, 5000);
            }
            
            function hideAlerts() {
                successAlert.style.display = 'none';
                errorAlert.style.display = 'none';
            }
            
            function escapeHtml(text) {
                const map = {
                    '&': '&amp;',
                    '<': '&lt;',
                    '>': '&gt;',
                    '"': '&quot;',
                    "'": '&#039;'
                };
                return text.replace(/[&<>"']/g, m => map[m]);
            }
            
            function escapeRegex(str) {
                return str.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
            }
        });
    </script>
</body>
</html>
